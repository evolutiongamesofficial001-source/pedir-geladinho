<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<title>Gourmet do Gelado</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
:root {
    --roxo: #12001a;
    --roxo-card: #240033;
    --amarelo: #ffe600;
    --ciano: #00ffd5;
}

* { box-sizing: border-box; }

body {
    margin: 0;
    font-family: system-ui, Arial, sans-serif;
    background: radial-gradient(circle at top, #3a005f, #0a0010);
    color: #fff;
}

.hero {
    text-align: center;
    padding: 28px 15px;
}

.hero h1 {
    margin: 0;
    color: var(--amarelo);
    letter-spacing: 2px;
    text-shadow: 0 0 18px rgba(255,230,0,.7);
}

.app {
    max-width: 480px;
    margin: auto;
    padding: 15px;
}

.grid-produtos {
    display: grid;
    gap: 12px;
}

.produto {
    background: linear-gradient(135deg, #2a0040, #160021);
    border-radius: 16px;
    padding: 14px;
    display: flex;
    justify-content: space-between;
    align-items: center;
}

.produto-info strong {
    font-size: 14px;
}

.produto-info span {
    font-size: 13px;
    color: var(--amarelo);
}

.produto input {
    width: 72px;
    padding: 12px;
    border-radius: 12px;
    border: none;
    background: #000;
    color: var(--ciano);
    font-size: 18px;
    text-align: center;
}

.card {
    margin-top: 15px;
    background: var(--roxo-card);
    padding: 14px;
    border-radius: 16px;
}

input, textarea, select {
    width: 100%;
    margin-top: 6px;
    padding: 12px;
    border-radius: 10px;
    border: none;
    background: #000;
    color: var(--amarelo);
    outline: none;
}

.resumo .linha {
    display: flex;
    justify-content: space-between;
    font-size: 20px;
}

#desconto { color: var(--ciano); }

.btn-neon {
    width: 100%;
    margin-top: 18px;
    padding: 16px;
    border-radius: 18px;
    border: none;
    font-size: 17px;
    font-weight: bold;
    background: linear-gradient(90deg, #ffe600, #ffb800);
    color: #1a0026;
    box-shadow: 0 0 30px rgba(255,230,0,.6);
}

.status {
    text-align: center;
    margin-top: 12px;
}

/* MOBILE */
@media (max-width: 420px) {
    .produto {
        flex-direction: column;
        align-items: stretch;
        gap: 10px;
    }

    .produto input {
        width: 100%;
        font-size: 20px;
    }

    .hero h1 {
        font-size: 22px;
    }
}
</style>
</head>

<body>

<header class="hero">
    <h1>üçß GOURMET DO GELADO</h1>
    <p>Geladinhos artesanais</p>
</header>

<main class="app">

    <section class="card">
        <label>üë§ Seu nome</label>
        <input id="nome" type="text" placeholder="Digite seu nome">
    </section>

    <section id="lista" class="grid-produtos"></section>

    <section class="card">
        <label>üìç Local de entrega</label>
        <textarea id="endereco" placeholder="Rua, n√∫mero, bairro, refer√™ncia"></textarea>
    </section>

    <section class="card">
        <label>üí≥ Forma de pagamento</label>
        <select id="pagamento">
            <option>Pix</option>
            <option>Dinheiro</option>
            <option>Cart√£o</option>
        </select>
    </section>

    <section class="card resumo">
        <div class="linha">
            <span>Total</span>
            <strong>R$ <span id="total">0,00</span></strong>
        </div>
        <small id="desconto"></small>
    </section>

    <button class="btn-neon" onclick="finalizarPedido()">
        üöÄ ENVIAR PEDIDO
    </button>

    <div id="status" class="status"></div>

</main>

<script>
document.addEventListener("DOMContentLoaded", () => {

const firebaseURL =
"https://gelado-pedido-default-rtdb.firebaseio.com/pedidos.json";

const produtos = [
    { nome: "Leite Ninho com Nutella", preco: 6 },
    { nome: "Mousse de Morango", preco: 6 },
    { nome: "Mousse de Maracuj√°", preco: 6 },
    { nome: "Mousse de Coco", preco: 6 },
    { nome: "Mousse de Lim√£o", preco: 6 },
    { nome: "Mousse de Pa√ßoca", preco: 6 },
    { nome: "Ninho com Morango", preco: 6 },
    { nome: "C√©u Azul", preco: 6 },
    { nome: "Mousse de Abacaxi", preco: 6 },
    { nome: "Pudim", preco: 7 },
    { nome: "Napolitano", preco: 7 }
];

const lista = document.getElementById("lista");
const totalSpan = document.getElementById("total");
const descontoEl = document.getElementById("desconto");
const statusEl = document.getElementById("status");
const enderecoEl = document.getElementById("endereco");
const pagamentoEl = document.getElementById("pagamento");
const nomeEl = document.getElementById("nome");

/* CRIA PRODUTOS */
produtos.forEach((p, i) => {
    const div = document.createElement("div");
    div.className = "produto";
    div.innerHTML = `
        <div class="produto-info">
            <strong>${p.nome}</strong>
            <span>R$ ${p.preco},00</span>
        </div>
        <input type="number" min="0" max="50" value="0" data-index="${i}">
    `;
    lista.appendChild(div);
});

lista.addEventListener("input", atualizarTotal);

function atualizarTotal() {
    let total = 0;
    let qtdTotal = 0;

    document.querySelectorAll("input[type='number']").forEach(input => {
        const qtd = Number(input.value) || 0;
        qtdTotal += qtd;
        total += qtd * produtos[input.dataset.index].preco;
    });

    let desconto = Math.min(Math.floor(qtdTotal / 6) * 0.05, 0.15);
    totalSpan.textContent =
        (total - total * desconto).toFixed(2).replace(".", ",");

    descontoEl.textContent = desconto
        ? `‚ö° Desconto aplicado: ${desconto * 100}%`
        : "";
}

window.finalizarPedido = function () {
    if (!nomeEl.value.trim() || !enderecoEl.value.trim()) {
        alert("Preencha nome e endere√ßo");
        return;
    }

    let itens = [];
    let total = 0;
    let qtdTotal = 0;

    document.querySelectorAll("input[type='number']").forEach(input => {
        const qtd = Number(input.value) || 0;
        if (qtd > 0) {
            const p = produtos[input.dataset.index];
            itens.push(`${p.nome} (${qtd})`);
            total += qtd * p.preco;
            qtdTotal += qtd;
        }
    });

    if (!itens.length) {
        alert("Selecione ao menos um geladinho");
        return;
    }

    let desconto = Math.min(Math.floor(qtdTotal / 6) * 0.05, 0.15);
    let totalFinal = total - total * desconto;

    statusEl.textContent = "‚è≥ Enviando pedido...";

    fetch(firebaseURL, {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({
            cliente: nomeEl.value,
            itens: itens.join(", "),
            endereco: enderecoEl.value,
            pagamento: pagamentoEl.value,
            totalFinal: totalFinal.toFixed(2),
            data: new Date().toISOString()
        })
    })
    .then(() => statusEl.textContent = "‚úÖ Pedido enviado com sucesso!")
    .catch(() => statusEl.textContent = "‚ùå Erro ao enviar pedido");
};

});
</script>

</body>
</html>
