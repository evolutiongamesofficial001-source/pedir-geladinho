<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<title>Gourmet do Gelado</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
:root{
 --roxo:#12001a;
 --roxo-card:#240033;
 --amarelo:#ffe600;
 --ciano:#00ffd5;
}
*{box-sizing:border-box}
body{
 margin:0;
 font-family:Arial,system-ui;
 background:radial-gradient(circle at top,#3a005f,#0a0010);
 color:#fff;
}
.hero{text-align:center;padding:25px}
.hero h1{margin:0;color:var(--amarelo)}
.app{max-width:480px;margin:auto;padding:15px}
.card{
 background:var(--roxo-card);
 padding:14px;
 border-radius:16px;
 margin-top:14px;
}
input,textarea,select{
 width:100%;
 margin-top:6px;
 padding:12px;
 border-radius:10px;
 border:none;
 background:#000;
 color:var(--amarelo);
}
.grid-produtos{display:grid;gap:12px}
.produto{
 background:linear-gradient(135deg,#2a0040,#160021);
 padding:14px;
 border-radius:16px;
 display:flex;
 justify-content:space-between;
 align-items:center;
}
.produto input{
 width:70px;
 padding:10px;
 border-radius:10px;
 background:#000;
 color:var(--ciano);
 border:none;
 text-align:center;
}
.pix-box{
 background:#000;
 padding:12px;
 border-radius:12px;
 margin-top:10px;
 text-align:center;
 color:var(--ciano);
}
.copy-btn{
 width:100%;
 margin-top:8px;
 padding:10px;
 border:none;
 border-radius:10px;
 font-weight:bold;
 background:linear-gradient(90deg,#00ffd5,#00bfa5);
 cursor:pointer;
}
.btn-neon{
 width:100%;
 margin-top:18px;
 padding:16px;
 border-radius:18px;
 border:none;
 font-size:16px;
 font-weight:bold;
 background:linear-gradient(90deg,#ffe600,#ffb800);
 color:#1a0026;
}
.hidden{display:none}
.status{text-align:center;margin-top:12px}
.resumo div{margin-top:6px}
</style>
</head>

<body>

<header class="hero">
 <h1>ğŸ§ GOURMET DO GELADO</h1>
 <p>Geladinhos artesanais</p>
</header>

<main class="app">

<div class="card">
 <label>ğŸ‘¤ Seu nome</label>
 <input id="nome">
</div>

<div id="lista" class="grid-produtos"></div>

<div class="card">
 <label>ğŸ“ EndereÃ§o</label>
 <textarea id="endereco"></textarea>
</div>

<div class="card">
 <label>ğŸ“… Data de entrega</label>
 <input type="date" id="dataEntrega">
</div>

<div class="card">
 <label>ğŸ’³ Forma de pagamento</label>
 <select id="pagamento">
  <option selected>Dinheiro</option>
  <option>Pix</option>
  <option>CartÃ£o</option>
 </select>

 <div id="pixOpcoes" class="hidden">
  <label style="margin-top:10px">â° Quando pagar?</label>
  <select id="quandoPix">
   <option>Pagar na entrega</option>
   <option>Pagar agora</option>
  </select>

  <div id="pixBox" class="pix-box hidden">
   ğŸ”‘ Chave Pix<br>
   <strong>34 996329990</strong>
   <button class="copy-btn" onclick="copiarPix()">ğŸ“‹ Copiar chave Pix</button>
  </div>
 </div>
</div>

<div class="card resumo">
 <div>Subtotal: R$ <span id="subtotal">0,00</span></div>
 <div>Entrega: R$ <span id="entrega">0,00</span></div>
 <strong>Total final: R$ <span id="total">0,00</span></strong>
</div>

<button class="btn-neon" onclick="finalizarPedido()">ğŸš€ ENVIAR PEDIDO</button>
<div id="status" class="status"></div>

</main>

<script>
const FIREBASE_URL =
"https://gelado-pedido-default-rtdb.firebaseio.com/pedidos.json";

const produtos=[
 {nome:"Leite Ninho com Nutella",preco:6},
 {nome:"Mousse de Morango",preco:6},
 {nome:"Mousse de MaracujÃ¡",preco:6},
 {nome:"Mousse de Coco",preco:6},
 {nome:"Mousse de LimÃ£o",preco:6},
 {nome:"Mousse de PaÃ§oca",preco:6},
 {nome:"Ninho com Morango",preco:6},
 {nome:"CÃ©u Azul",preco:6},
 {nome:"Mousse de Abacaxi",preco:6},
 {nome:"Pudim",preco:7},
 {nome:"Napolitano",preco:7}
];

const lista=document.getElementById("lista");
const nomeEl=document.getElementById("nome");
const enderecoEl=document.getElementById("endereco");
const dataEntregaEl=document.getElementById("dataEntrega");
const pagamentoEl=document.getElementById("pagamento");
const quandoPixEl=document.getElementById("quandoPix");
const pixOpcoes=document.getElementById("pixOpcoes");
const pixBox=document.getElementById("pixBox");
const subtotalEl=document.getElementById("subtotal");
const entregaEl=document.getElementById("entrega");
const totalEl=document.getElementById("total");
const statusEl=document.getElementById("status");

let pixCopiado=false;

produtos.forEach((p,i)=>{
 lista.innerHTML+=`
 <div class="produto">
  <div><strong>${p.nome}</strong><br>R$ ${p.preco},00</div>
  <input type="number" min="0" value="0" data-i="${i}">
 </div>`;
});

lista.addEventListener("input",calcular);

pagamentoEl.addEventListener("change",()=>{
 pixOpcoes.classList.toggle("hidden",pagamentoEl.value!=="Pix");
 pixBox.classList.add("hidden");
});

quandoPixEl.addEventListener("change",()=>{
 pixBox.classList.toggle("hidden",quandoPixEl.value!=="Pagar agora");
});

function calcular(){
 let subtotal=0,totalItens=0;
 document.querySelectorAll("input[type=number]").forEach(i=>{
  const q=+i.value||0;
  const p=produtos[i.dataset.i];
  subtotal+=q*p.preco;
  totalItens+=q;
 });
 const entrega=totalItens>0?3+(totalItens-1)*0.5:0;
 subtotalEl.textContent=subtotal.toFixed(2).replace(".",",");
 entregaEl.textContent=entrega.toFixed(2).replace(".",",");
 totalEl.textContent=(subtotal+entrega).toFixed(2).replace(".",",");
}

function copiarPix(){
 navigator.clipboard.writeText("34996329990");
 pixCopiado=true;
 alert("Pix copiado!");
}

function finalizarPedido(){
 if(!nomeEl.value||!enderecoEl.value){
  alert("Preencha nome e endereÃ§o");
  return;
 }

 if(pagamentoEl.value==="Pix" && quandoPixEl.value==="Pagar agora" && !pixCopiado){
  alert("Copie a chave Pix antes de enviar.");
  return;
 }

 let itens=[],subtotal=0,totalItens=0;

 document.querySelectorAll("input[type=number]").forEach(i=>{
  const q=+i.value||0;
  if(q>0){
   const p=produtos[i.dataset.i];
   itens.push(`${p.nome} (${q})`);
   subtotal+=q*p.preco;
   totalItens+=q;
  }
 });

 if(!itens.length){
  alert("Escolha pelo menos um produto");
  return;
 }

 const entrega=3+(totalItens-1)*0.5;
 const total=subtotal+entrega;

 const pedido={
  cliente:nomeEl.value,
  data:new Date().toISOString(),
  dataEntrega:dataEntregaEl.value||"",
  endereco:enderecoEl.value,
  itens:itens.join(", "),
  pagamento:
   pagamentoEl.value==="Pix"
    ?`Pix - ${quandoPixEl.value}`
    :pagamentoEl.value,
  pixStatus:
   pagamentoEl.value==="Pix" && quandoPixEl.value==="Pagar agora"
    ?"Pago via Pix"
    :"Pagamento na entrega",
  totalFinal:total.toFixed(2)
 };

 statusEl.textContent="â³ Enviando pedido...";

 fetch(FIREBASE_URL,{
  method:"POST",
  headers:{"Content-Type":"application/json"},
  body:JSON.stringify(pedido)
 }).then(()=>{
  statusEl.textContent="âœ… Pedido enviado com sucesso!";
  setTimeout(()=>location.reload(),1500);
 }).catch(()=>{
  statusEl.textContent="âŒ Erro ao enviar pedido";
 });
}
</script>

</body>
</html>
